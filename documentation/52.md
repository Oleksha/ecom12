# Часть 52. Сделайте меню заголовка динамичным с помощью многоуровневых категорий | Раскрывающийся список категорий 2 и 3 уровня
В этой части мы начнем работу над меню заголовка, в котором будем динамически отображать:
- Категории
- Подкатегории
- Подподкатегории

в навигационной панели нашего сайта.

## Обновить header.blade.php
Мы покажем только те категории, в которых есть подкатегории, в противном случае мы их не покажем.

Мы обновим левые категории, а также правые: категории главной панели навигации.

В категориях слева мы покажем двухуровневые раскрывающиеся категории, а в категориях справа мы покажем трехуровневые категории.

Мы включим модель **Category** и вызовем функцию **getCategories()** для извлечения динамических категорий и их вложенных подкатегорий.
```php
@php
    use App\Models\Category;
    // Получаем категории и их подкатегории
    $categories = Category::getCategories('Front');
@endphp
```
Мы обновим:
- Левые категории (вертикальная панель навигации) → Показать двухуровневый раскрывающийся список
- Правая/основная панель навигации Категории → Показать раскрывающийся список из 3 уровней (Категория → Подкатегория → Подподкатегория)

**Левые категории (2 уровня вложенности)**
```html
<div class="navbar-nav w-100">
    @foreach($categories as $category)
        @if($category['menu_status'] == 1)
            @if(count($category['subcategories']) > 0)
                <div class="nav-item dropdown">
                    <a href="{{ url($category['url']) }}" class="nav-link" data-toggle="dropdown">
                        {{ $category['name'] }} <i class="fa fa-angle-down float-right mt-1"></i>
                    </a>
                    <div class="dropdown-menu position-absolute bg-secondary border-0 rounded-0 w-100 m-0">
                        @foreach($category['subcategories'] as $subcategory)
                            @if($subcategory['menu_status'] == 1)
                                <a href="{{ url($subcategory['url']) }}" class="dropdown-item">
                                    {{ $subcategory['name'] }}
                                </a>
                            @endif
                        @endforeach
                    </div>
                </div>
            @else
                <a href="{{ url($category['url']) }}" class="nav-item nav-link">
                    {{ $category['name'] }}
                </a>
            @endif
        @endif
    @endforeach
</div>
```
**Правая/основная панель навигации. Категории (3-уровневый раскрывающийся список)**
```html
<div class="navbar-nav mr-auto py-0">
    <a href="{{ url('/') }}" class="nav-item nav-link">Главная</a>
    @foreach($categories as $category)
        @if($category['menu_status'] == 1)
            @if(count($category['subcategories']) > 0)
                <div class="nav-item dropdown">
                    <a href="{{ url($category['url']) }}" class="nav-link dropdown-toggle" data-toggle="dropdown">
                        {{ $category['name'] }}
                    </a>
                    <div class="dropdown-menu rounded-0 m-0">
                        @foreach($category['subcategories'] as $subcategory)
                            @if($subcategory['menu_status'] == 1)
                                @if(count($subcategory['subcategories']) > 0)
                                    <div class="dropdown-submenu">
                                        <a href="{{ url($subcategory['url']) }}" class="dropdown-item nav-link-right">
                                            {{ $subcategory['name'] }}
                                            <i class="fa fa-angle-right float-right mt-1"></i>
                                        </a>
                                        <div class="dropdown-menu">
                                            @foreach($subcategory['subcategories'] as $subsubcategory)
                                                @if($subsubcategory['menu_status'] == 1)
                                                    <a href="{{ url($subsubcategory['url']) }}" class="dropdown-item nav-link-right">
                                                        {{ $subsubcategory['name'] }}
                                                    </a>
                                                @endif
                                            @endforeach
                                        </div>
                                    </div>
                                @else
                                    <a href="{{ url($subcategory['url']) }}" class="dropdown-item nav-link-right">
                                        {{ $subcategory['name'] }}
                                    </a>
                                @endif
                            @endif
                        @endforeach
                    </div>
                </div>
            @else
                <a href="{{ url($category['url']) }}" class="nav-item nav-link">
                    {{ $category['name'] }}
                </a>
            @endif
        @endif
    @endforeach
    <a href="#" class="nav-item nav-link">Контакты</a>
</div>
```
Обновление **styles.blade.php** для CSS-стиля раскрывающегося списка 3-го уровня
```html
<style>
    .dropdown-submenu {
        position: relative;
    }
    .dropdown-submenu .dropdown-menu {
        top: 0;
        left: 100%;
        margin-top: -9px;
        display: none;
    }
    .dropdown-submenu:hover .dropdown-menu {
        display: block;
    }
    .dropdown-submenu .dropdown-item {
        display: block;
        top: -10px;
    }
    .navbar-expand-lg .navbar-nav .nav-link-right {
        padding: 3px 10px;
    }
    .navbar-light .navbar-nav .nav-link-right:hover, .navbar-light .navbar-nav .nav-link-right.active {
        color: #D19C97;
    }
</style>
```
Обновление **scripts.blade.php** 
```js
<script>
    // Initialize submenu functionality
    $(document).ready(function () {
        $('.dropdown-submenu a.test').on('click', function (e) {
            $(this).next('ul').toggle();
            e.stopPropagation();
            e.preventDefault();
        });
    });
</script>
```
Теперь мы можем отображать динамические категории и подкатегории (до 3 уровней) в навигационном меню заголовка. Они полностью управляются из админки, и любое действие по добавлению/удалению сразу же отобразится в меню.
# Что дальше?
В [следующей части](53.md) мы начнем делать домашнюю страницу динамичной, загружая из базы данных контент, такой как баннеры, избранные категории и многое другое.

[Оглавление](../README.md)

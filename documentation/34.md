# Часть 34. Модуль «Продукты» (VII) | Динамическое управление цветами семейства
В этой части мы улучшим модуль «Товары», динамически управляя цветами семейства из базы данных. Мы создадим новую таблицу цветов, наполним её стандартными цветами, а затем интегрируем эти параметры в форму «Добавить/редактировать товар».
## Шаг 1. Создайте таблицу цветов.
Мы создадим миграцию и модель, используя следующую команду Artisan:
```
php artisan make:model Color -m
```
Теперь обновите сгенерированный файл миграции следующим образом:
```php
Schema::create('colors', function (Blueprint $table) {
    $table->id();
    $table->string('name');
    $table->tinyInteger('status');
    $table->timestamps();
});
```
Запустите миграцию:
```
php artisan migrate
```
## Шаг 2. Исходные цвета по умолчанию
Создайте Seeder:
```
php artisan make:seeder ColorTableSeeder
```
Обновите ```ColorTableSeeder.php``` следующим кодом:
```php
namespace Database\Seeders;

use App\Models\Color;
use Illuminate\Database\Seeder;

class ColorTableSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        $colors = ['Черный', 'Синий', 'Коричневый', 'Зеленый', 'Серый', 'Мульти', 'Оливковый', 'Оранжевый', 'Розовый', 'Фиолетовый', 'Красный', 'Белый', 'Желтый'];
        foreach ($colors as $colorName) {
            $color = new Color;
            $color->name = $colorName;
            $color->status = 1;
            $color->save();
        }
    }
}
```
Обновите ```DatabaseSeeder.php``` для вызова сеялки: 
```php
$this->call(ColorTableSeeder::class);
```
Теперь запустите сеялку для вставки цветов:
```
php artisan db:seed --class=ColorTableSeeder
```
## Шаг 3. Создать статический метод в модели Color
Добавьте эту функцию для динамического получения активных цветов:
```php
public static function colors()
{
    return Color::where('status', 1)->get();
}
```
## Шаг 4. Обновите add_edit_product.blade.php для отображения цветов семейства.
Теперь обновите форму, чтобы отобразить раскрывающийся список доступных цветов семейства:
```html
<div class="mb-3">
    <label for="family_color" class="form-label">Семейство цветов*</label>
    <select name="family_color" class="form-select" id="family_color">
        <option value="">Выберите цвет...</option>
        @foreach($familyColors as $color)
            <option value="{{ $color->name }}" @if(isset($product['family_color']) && $product['family_color'] == $color->name) selected @endif>
                {{ $color->name }}
            </option>
        @endforeach
    </select>
</div>
```
# Что дальше?
В [следующей части](35.md) мы добавим валидацию для формы добавления и редактирования товаров.

[Оглавление](../README.md)

# Часть 31. Модуль «Продукты» (IV) | Показать категорию продукта и родительскую категорию
В этой части мы улучшаем модуль «Товары», отображая категорию каждого продукта и родительскую категорию на панели администратора.
## Шаг 1. Определение взаимосвязи модели
Мы определим отношение «принадлежит к» в модели «Продукт», чтобы связать ее с моделью «Категория», и будем загружать отношение «родительская категория» для вложенных категорий.
```php
public function category(): BelongsTo
{
    return $this->belongsTo(Category::class)->with('parent_category');
}
```
## Шаг 2. Обновление логики ProductService
В ```ProductService``` мы изменяем метод ```products()``` для извлечения продуктов вместе с их связанной категорией и родительской категорией:
```php
$products = Product::with('category')->get();
```
## Шаг 3. Обновление Blade View (index.blade.php)
Улучшите таблицу со списком товаров, чтобы динамически отображать категорию и родительскую категорию:
```html
<td>{{ $product->category->name }}</td>
<td>
    @if(isset($product->category->parent_category->name))
        {{ $product->category->parent_category->name }}
    @else
        ROOT
    @endif
</td>
```
# Что дальше?
В [следующей части](32.md) мы начнем работать над функциональностью «Добавить/редактировать продукт», используя общую форму и настройку маршрута, аналогично тому, как мы работали с категориями ранее.

[Оглавление](../README.md)

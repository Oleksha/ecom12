# Часть 8. Создание AdminService для входа администратора и других функций
В этой части мы снова поработаем над функционалом входа администратора, но на этот раз будем использовать класс сервиса. Это поможет нам понять разницу между традиционной логикой на основе контроллера и логикой на основе сервисов, а также то, как использование сервисов приводит к созданию более качественного, чистого и повторно используемого кода. Поэтому мы создадим ```AdminService```, который будет структурированно обрабатывать всю логику, связанную с администрированием.

В начале этой серии мы решили использовать запросы и службы для лучшей организации нашего кода.

В предыдущей части мы впервые использовали проверку запросов. В этой части мы впервые используем классы обслуживания.
## Зачем использовать AdminService?
Класс обслуживания в Laravel используется для отделения бизнес-логики от контроллера, что делает код более чистым, пригодным для повторного использования и обслуживания.

Наш ```AdminService``` будет управлять не только входом администратора, но и всеми остальными функциями, связанными с администрированием, по мере продвижения по серии.
## Шаг 1. Создать папку и структуру служб
Сначала мы создадим папку ```Services``` внутри каталога приложения для управления различными службами.

Чтобы все было организовано, мы создадим отдельные папки для служб Admin и Front, например:
- **app/Services/Admin/** - Службы, связанные с администрированием
- **app/Services/Front/** - Сервисы, связанные с фронтендом

Такое разделение делает код модульным, простым для понимания и обслуживания.
## Шаг 2. Создать AdminService
Создайте ```AdminService``` в: ```/app/Services/Admin/```

Добавьте функцию ```login()```, которая принимает ```$data``` (адрес электронной почты и пароль) и возвращает 1 в случае успеха и 0 в случае неудачи.
```php
namespace App\Services\Admin;

use App\Models\Admin;
use App\Models\AdminsRole;
use Auth;
use Illuminate\Support\Facades\Hash;
use Intervention\Image\Drivers\Gd\Driver;
use Intervention\Image\ImageManager;

class AdminService
{
    public function login($data): string
    {
        if (Auth::guard('admin')->attempt(['email' => $data['email'], 'password' => $data['password']])) {
            $loginStatus = 1;
        } else {
            $loginStatus = 0;
        }
        return $loginStatus;
    }
}
```
## Шаг 3. Обновите функцию store() в AdminController
Измените функцию ```store()``` так, чтобы она вызывала ```AdminService``` для проверки подлинности входа.
```php
public function store(LoginRequest $request)
{
    $data = $request->all();
    $service = new AdminService()
    $loginStatus = $service->login($data);
    if ($loginStatus == 1) {
        return redirect()->route('dashboard.index');
    } else {
        return redirect()->back()->with('error_message', 'Invalid Email or Password');
    }
}
```
## Шаг 4. Включить AdminService в AdminController
Добавьте следующее в начало AdminController.php:
```php
use App\Services\Admin\AdminService;
```
## Проверьте функциональность входа администратора:
Теперь протестируйте вход администратора, используя следующие учетные данные:

- **Электронная почта**: admin@admin.com
- **Пароль**: 123456

Если вход в систему успешен, произойдет перенаправление на панель администратора.

Если вход в систему не удастся, появится сообщение об ошибке.

Мы успешно реализовали вход администратора через сервисный уровень. Это поможет отделить всю логику, связанную с администрированием, от контроллера, сделав код более структурированным и пригодным для повторного использования.
# Что дальше?
В [следующей части](09.md) мы реализуем функционал «Запомнить меня» для входа администратора, снова используя AdminService для эффективного управления его логикой.

[Оглавление](../README.md)
